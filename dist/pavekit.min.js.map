{"version":3,"file":"pavekit.min.js","mappings":"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","sources":["webpack://PaveKit/webpack/universalModuleDefinition","webpack://PaveKit/webpack/bootstrap","webpack://PaveKit/webpack/runtime/define property getters","webpack://PaveKit/webpack/runtime/hasOwnProperty shorthand","webpack://PaveKit/./src/core/security.js","webpack://PaveKit/./src/core/api.js","webpack://PaveKit/./src/core/privacy.js","webpack://PaveKit/./src/detectors/form-detector.js","webpack://PaveKit/./src/detectors/oauth-detector.js","webpack://PaveKit/./src/detectors/activity-detector.js","webpack://PaveKit/./src/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"PaveKit\"] = factory();\n\telse\n\t\troot[\"PaveKit\"] = factory();\n})(Object(typeof self !== 'undefined' ? self : this), function() {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","/**\n * SecurityUtils - Handles secure data capture and field filtering\n * Ensures GDPR compliance and prevents sensitive data collection\n */\nclass SecurityUtils {\n  constructor() {\n    // Sensitive field patterns to avoid (case-insensitive)\n    this.SENSITIVE_PATTERNS = [\n      'password', 'passwd', 'pwd', 'pass',\n      'token', 'secret', 'key', 'auth',\n      'credit', 'card', 'cvv', 'cvc', 'ccv',\n      'ssn', 'social', 'security',\n      'pin', 'code', 'otp',\n      'bank', 'account', 'routing',\n      'license', 'passport', 'id_number',\n      'api_key', 'private', 'hidden'\n    ];\n\n    // Safe field patterns we're allowed to capture\n    this.SAFE_PATTERNS = [\n      'email', 'mail', 'e-mail',\n      'name', 'firstname', 'lastname', 'fullname',\n      'company', 'organization', 'org',\n      'phone', 'tel', 'telephone', 'mobile',\n      'website', 'url', 'domain',\n      'title', 'position', 'job',\n      'industry', 'category'\n    ];\n\n    // Safe input types\n    this.SAFE_INPUT_TYPES = [\n      'email', 'text', 'tel', 'url', 'search'\n    ];\n\n    // Blocked input types\n    this.BLOCKED_INPUT_TYPES = [\n      'password', 'hidden', 'file'\n    ];\n  }\n\n  /**\n   * Check if a field is safe to capture data from\n   * @param {string} fieldName - The field name or ID\n   * @param {string} fieldType - The input type\n   * @param {HTMLElement} element - The DOM element\n   * @returns {boolean} True if safe to capture\n   */\n  isSafeToCapture(fieldName, fieldType, element = null) {\n    if (!fieldName && !fieldType) return false;\n\n    const name = (fieldName || '').toLowerCase();\n    const type = (fieldType || '').toLowerCase();\n\n    // Block sensitive input types\n    if (this.BLOCKED_INPUT_TYPES.includes(type)) {\n      return false;\n    }\n\n    // Block fields with sensitive names\n    if (this.containsSensitivePattern(name)) {\n      return false;\n    }\n\n    // Additional DOM-based checks if element is provided\n    if (element) {\n      // Check placeholder text for sensitive content\n      const placeholder = (element.placeholder || '').toLowerCase();\n      if (this.containsSensitivePattern(placeholder)) {\n        return false;\n      }\n\n      // Check aria-label for sensitive content\n      const ariaLabel = (element.getAttribute('aria-label') || '').toLowerCase();\n      if (this.containsSensitivePattern(ariaLabel)) {\n        return false;\n      }\n\n      // Check if field is hidden or has display:none\n      const styles = window.getComputedStyle(element);\n      if (styles.display === 'none' || styles.visibility === 'hidden') {\n        return false;\n      }\n\n      // Check for autocomplete attributes that indicate sensitive data\n      const autocomplete = (element.getAttribute('autocomplete') || '').toLowerCase();\n      if (autocomplete.includes('current-password') ||\n          autocomplete.includes('new-password') ||\n          autocomplete.includes('cc-number') ||\n          autocomplete.includes('cc-csc')) {\n        return false;\n      }\n    }\n\n    // Allow safe input types\n    if (this.SAFE_INPUT_TYPES.includes(type)) {\n      return true;\n    }\n\n    // Allow fields with safe patterns\n    if (this.containsSafePattern(name)) {\n      return true;\n    }\n\n    // Default to false for unknown patterns\n    return false;\n  }\n\n  /**\n   * Check if text contains sensitive patterns\n   * @param {string} text - Text to check\n   * @returns {boolean} True if contains sensitive patterns\n   */\n  containsSensitivePattern(text) {\n    if (!text) return false;\n    const lowerText = text.toLowerCase();\n\n    return this.SENSITIVE_PATTERNS.some(pattern =>\n      lowerText.includes(pattern)\n    );\n  }\n\n  /**\n   * Check if text contains safe patterns\n   * @param {string} text - Text to check\n   * @returns {boolean} True if contains safe patterns\n   */\n  containsSafePattern(text) {\n    if (!text) return false;\n    const lowerText = text.toLowerCase();\n\n    return this.SAFE_PATTERNS.some(pattern =>\n      lowerText.includes(pattern)\n    );\n  }\n\n  /**\n   * Sanitize form data to remove sensitive information\n   * @param {Object} formData - Raw form data\n   * @param {HTMLFormElement} form - The form element\n   * @returns {Object} Sanitized data\n   */\n  sanitizeFormData(formData, form = null) {\n    const sanitized = {};\n\n    Object.keys(formData).forEach(fieldName => {\n      const value = formData[fieldName];\n\n      // Skip empty values\n      if (!value || value.trim() === '') return;\n\n      // Find corresponding form element if form is provided\n      let element = null;\n      if (form) {\n        element = form.querySelector(`[name=\"${fieldName}\"], #${fieldName}`);\n      }\n\n      // Check if field is safe to capture\n      const fieldType = element ? element.type : null;\n      if (this.isSafeToCapture(fieldName, fieldType, element)) {\n        // Additional validation for email fields\n        if (this.isEmailField(fieldName, fieldType)) {\n          if (this.isValidEmail(value)) {\n            sanitized[fieldName] = this.sanitizeEmail(value);\n          }\n        } else {\n          // Sanitize general text fields\n          sanitized[fieldName] = this.sanitizeText(value);\n        }\n      }\n    });\n\n    return sanitized;\n  }\n\n  /**\n   * Check if field is an email field\n   * @param {string} fieldName - Field name\n   * @param {string} fieldType - Field type\n   * @returns {boolean} True if email field\n   */\n  isEmailField(fieldName, fieldType) {\n    const name = (fieldName || '').toLowerCase();\n    const type = (fieldType || '').toLowerCase();\n\n    return type === 'email' ||\n           name.includes('email') ||\n           name.includes('mail');\n  }\n\n  /**\n   * Validate email format\n   * @param {string} email - Email to validate\n   * @returns {boolean} True if valid email\n   */\n  isValidEmail(email) {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return emailRegex.test(email);\n  }\n\n  /**\n   * Sanitize email address\n   * @param {string} email - Email to sanitize\n   * @returns {string} Sanitized email\n   */\n  sanitizeEmail(email) {\n    return email.toLowerCase().trim();\n  }\n\n  /**\n   * Sanitize general text\n   * @param {string} text - Text to sanitize\n   * @returns {string} Sanitized text\n   */\n  sanitizeText(text) {\n    // Remove extra whitespace and limit length\n    return text.trim().substring(0, 255);\n  }\n\n  /**\n   * Generate a hash of sensitive data for privacy\n   * @param {string} data - Data to hash\n   * @returns {string} Hash string\n   */\n  hashSensitiveData(data) {\n    // Simple hash function for client-side use\n    let hash = 0;\n    if (!data || data.length === 0) return hash.toString();\n\n    for (let i = 0; i < data.length; i++) {\n      const char = data.charCodeAt(i);\n      hash = ((hash << 5) - hash) + char;\n      hash = hash & hash; // Convert to 32-bit integer\n    }\n\n    return Math.abs(hash).toString(36);\n  }\n\n  /**\n   * Check if current page URL is safe for tracking\n   * @param {string} url - URL to check (defaults to current page)\n   * @returns {boolean} True if safe to track\n   */\n  isSafeURL(url = window.location.href) {\n    const lowerUrl = url.toLowerCase();\n\n    // Block sensitive pages\n    const sensitivePages = [\n      'password', 'reset', 'forgot',\n      'payment', 'checkout', 'billing',\n      'admin', 'dashboard', 'settings',\n      'profile', 'account'\n    ];\n\n    return !sensitivePages.some(page => lowerUrl.includes(page));\n  }\n\n  /**\n   * Extract safe metadata from page\n   * @returns {Object} Safe page metadata\n   */\n  extractSafePageData() {\n    return {\n      url: this.isSafeURL() ? window.location.href : '[filtered]',\n      title: document.title || '',\n      referrer: this.isSafeURL(document.referrer) ? document.referrer : '[filtered]',\n      timestamp: new Date().toISOString(),\n      userAgent: navigator.userAgent\n    };\n  }\n\n  /**\n   * Check if browser supports required features\n   * @returns {boolean} True if browser is supported\n   */\n  isBrowserSupported() {\n    return !!(\n      window.fetch &&\n      window.Promise &&\n      window.addEventListener &&\n      document.querySelector\n    );\n  }\n\n  /**\n   * Get security compliance info\n   * @returns {Object} Compliance information\n   */\n  getComplianceInfo() {\n    return {\n      gdpr_compliant: true,\n      data_minimization: true,\n      no_sensitive_data: true,\n      user_consent_required: true,\n      opt_out_available: true,\n      data_retention_limited: true\n    };\n  }\n}\n\nexport default SecurityUtils;\n","/**\n * APIClient - Handles all communication with the PaveKit backend\n * Provides methods for signup registration, activity tracking, and conversion events\n */\nclass APIClient {\n  constructor() {\n    this.baseURL = \"http://localhost:8000\"; // Default for development\n    this.apiKey = null;\n    this.timeout = 5000; // 5 second timeout\n    this.retryAttempts = 3;\n    this.retryDelay = 1000; // 1 second\n  }\n\n  /**\n   * Initialize the API client with configuration\n   * @param {Object} config - Configuration object\n   * @param {string} config.apiKey - API key for authentication\n   * @param {string} config.baseURL - Base URL for API endpoints\n   * @param {number} config.timeout - Request timeout in milliseconds\n   */\n  init(config) {\n    this.apiKey = config.apiKey;\n    this.baseURL = config.baseURL || this.baseURL;\n    this.timeout = config.timeout || this.timeout;\n\n    if (config.debug) {\n      console.log(\"APIClient initialized:\", {\n        baseURL: this.baseURL,\n        hasApiKey: !!this.apiKey,\n      });\n    }\n  }\n\n  /**\n   * Make an HTTP request with retry logic\n   * @param {string} endpoint - API endpoint\n   * @param {Object} options - Request options\n   * @returns {Promise} Response promise\n   */\n  async makeRequest(endpoint, options = {}) {\n    const url = `${this.baseURL}/api/onboarding/sdk${endpoint}`;\n\n    const requestOptions = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"X-API-Key\": this.apiKey,\n        ...options.headers,\n      },\n      ...options,\n    };\n\n    // Add timeout using AbortController\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), this.timeout);\n    requestOptions.signal = controller.signal;\n\n    let lastError = null;\n\n    for (let attempt = 1; attempt <= this.retryAttempts; attempt++) {\n      try {\n        const response = await fetch(url, requestOptions);\n        clearTimeout(timeoutId);\n\n        if (response.ok) {\n          return await response.json();\n        }\n\n        // Handle HTTP errors\n        const errorData = await response.text();\n        throw new Error(`HTTP ${response.status}: ${errorData}`);\n      } catch (error) {\n        clearTimeout(timeoutId);\n        lastError = error;\n\n        // Don't retry on certain errors\n        if (\n          error.name === \"AbortError\" ||\n          (error.message && error.message.includes(\"401\"))\n        ) {\n          throw error;\n        }\n\n        // Wait before retrying (except on last attempt)\n        if (attempt < this.retryAttempts) {\n          await this.delay(this.retryDelay * attempt);\n        }\n      }\n    }\n\n    throw lastError;\n  }\n\n  /**\n   * Register a user signup event\n   * @param {Object} data - Signup data\n   * @param {string} data.email - User email address\n   * @param {string} data.signup_method - Signup method ('form', 'oauth_google', 'oauth_github')\n   * @param {string} data.page_url - URL where signup occurred\n   * @param {string} data.referrer - Referrer URL\n   * @param {Object} data.metadata - Additional metadata\n   * @returns {Promise} API response\n   */\n  async registerSignup(data) {\n    if (!this.apiKey) {\n      throw new Error(\"API key not configured\");\n    }\n\n    if (!data.email) {\n      throw new Error(\"Email is required for signup registration\");\n    }\n\n    const payload = {\n      email: data.email,\n      signup_method: data.signup_method || \"form\",\n      page_url: data.page_url || window.location.href,\n      referrer: data.referrer || document.referrer,\n      user_agent: navigator.userAgent,\n      metadata: data.metadata || {},\n    };\n\n    console.log(\"APIClient: Registering signup with payload:\", payload);\n    console.log(\n      \"APIClient: JSON stringified payload:\",\n      JSON.stringify(payload),\n    );\n\n    try {\n      const result = await this.makeRequest(\"/signup\", {\n        method: \"POST\",\n        body: JSON.stringify(payload),\n      });\n      console.log(\"APIClient: Signup registered successfully:\", result);\n      return result;\n    } catch (error) {\n      console.error(\"Failed to register signup:\", error);\n      console.error(\"APIClient: Payload that failed:\", payload);\n      throw error;\n    }\n  }\n\n  /**\n   * Track user activity (heartbeat)\n   * @param {Object} data - Activity data\n   * @param {string} data.email - User email address\n   * @param {string} data.page_url - Current page URL\n   * @returns {Promise} API response\n   */\n  async trackActivity(data) {\n    if (!this.apiKey || !data.email) {\n      return; // Silently fail for activity tracking\n    }\n\n    const payload = {\n      email: data.email,\n      page_url: data.page_url || window.location.href,\n      timestamp: new Date().toISOString(),\n    };\n\n    try {\n      return await this.makeRequest(\"/activity\", {\n        method: \"POST\",\n        body: JSON.stringify(payload),\n      });\n    } catch (error) {\n      // Don't throw errors for activity tracking\n      console.warn(\"Failed to track activity:\", error.message);\n    }\n  }\n\n  /**\n   * Update user information\n   * @param {Object} data - User data to update\n   * @param {string} data.email - User email address (required to identify user)\n   * @param {string} data.name - User's display name\n   * @returns {Promise} API response\n   */\n  async updateUser(data) {\n    if (!this.apiKey) {\n      throw new Error(\"API key not configured\");\n    }\n\n    if (!data.email) {\n      throw new Error(\"Email is required to update user info\");\n    }\n\n    const payload = {\n      email: data.email,\n      name: data.name || \"\",\n    };\n\n    try {\n      return await this.makeRequest(\"/user-info\", {\n        method: \"POST\",\n        body: JSON.stringify(payload),\n      });\n    } catch (error) {\n      console.error(\"Failed to update user info:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Track conversion event\n   * @param {Object} data - Conversion data\n   * @param {string} data.email - User email address\n   * @param {string} data.conversion_type - Type of conversion ('purchase', 'upgrade', 'subscribe')\n   * @param {number} data.value - Conversion value\n   * @param {string} data.currency - Currency code\n   * @param {Object} data.metadata - Additional metadata\n   * @returns {Promise} API response\n   */\n  async trackConversion(data) {\n    if (!this.apiKey) {\n      throw new Error(\"API key not configured\");\n    }\n\n    if (!data.email) {\n      throw new Error(\"Email is required for conversion tracking\");\n    }\n\n    const payload = {\n      email: data.email,\n      conversion_type: data.conversion_type || \"purchase\",\n      value: data.value || 0,\n      currency: data.currency || \"USD\",\n      metadata: data.metadata || {},\n    };\n\n    try {\n      return await this.makeRequest(\"/conversion\", {\n        method: \"POST\",\n        body: JSON.stringify(payload),\n      });\n    } catch (error) {\n      console.error(\"Failed to track conversion:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Validate API key with the backend\n   * @returns {Promise} Validation response\n   */\n  async validateAPIKey() {\n    if (!this.apiKey) {\n      throw new Error(\"API key not configured\");\n    }\n\n    try {\n      return await this.makeRequest(\"/validate\", {\n        method: \"GET\",\n      });\n    } catch (error) {\n      console.error(\"API key validation failed:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Send a batch of events (for offline support)\n   * @param {Array} events - Array of events to send\n   * @returns {Promise} Batch response\n   */\n  async sendBatch(events) {\n    if (!this.apiKey || !events || events.length === 0) {\n      return;\n    }\n\n    const payload = {\n      events: events,\n      batch_timestamp: new Date().toISOString(),\n    };\n\n    try {\n      return await this.makeRequest(\"/batch\", {\n        method: \"POST\",\n        body: JSON.stringify(payload),\n      });\n    } catch (error) {\n      console.error(\"Failed to send batch:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Get API configuration from backend\n   * @returns {Promise} Configuration response\n   */\n  async getConfig() {\n    if (!this.apiKey) {\n      throw new Error(\"API key not configured\");\n    }\n\n    try {\n      return await this.makeRequest(\"/config\", {\n        method: \"GET\",\n      });\n    } catch (error) {\n      console.warn(\"Failed to get config:\", error);\n      return {}; // Return empty config on failure\n    }\n  }\n\n  /**\n   * Test connection to the API\n   * @returns {Promise<boolean>} True if connection successful\n   */\n  async testConnection() {\n    try {\n      await this.validateAPIKey();\n      return true;\n    } catch (error) {\n      return false;\n    }\n  }\n\n  /**\n   * Delay execution for specified milliseconds\n   * @param {number} ms - Milliseconds to delay\n   * @returns {Promise} Promise that resolves after delay\n   */\n  delay(ms) {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n  }\n\n  /**\n   * Get current API client status\n   * @returns {Object} Status information\n   */\n  getStatus() {\n    return {\n      initialized: !!this.apiKey,\n      baseURL: this.baseURL,\n      hasConnection: true, // Would be set by periodic health checks\n      lastError: null,\n    };\n  }\n\n  /**\n   * Update configuration\n   * @param {Object} config - New configuration\n   */\n  updateConfig(config) {\n    if (config.baseURL) this.baseURL = config.baseURL;\n    if (config.timeout) this.timeout = config.timeout;\n    if (config.retryAttempts) this.retryAttempts = config.retryAttempts;\n    if (config.retryDelay) this.retryDelay = config.retryDelay;\n  }\n\n  /**\n   * Reset API client to initial state\n   */\n  reset() {\n    this.apiKey = null;\n    this.baseURL = \"http://localhost:8000\";\n    this.timeout = 5000;\n    this.retryAttempts = 3;\n    this.retryDelay = 1000;\n  }\n}\n\nexport default APIClient;\n","/**\n * PrivacyManager - Handles GDPR compliance and user consent management\n * Ensures privacy-compliant data collection and provides opt-out mechanisms\n */\nclass PrivacyManager {\n  constructor() {\n    this.consentKey = \"pavekit_consent\";\n    this.optOutKey = \"pavekit_opt_out\";\n    this.hasUserConsent = false;\n    this.isOptedOut = false;\n    this.consentTimestamp = null;\n    this.consentVersion = \"1.0\";\n\n    // Initialize consent status from storage\n    this.loadConsentStatus();\n  }\n\n  /**\n   * Load consent status from localStorage\n   */\n  loadConsentStatus() {\n    try {\n      const consentData = localStorage.getItem(this.consentKey);\n      const optOutData = localStorage.getItem(this.optOutKey);\n\n      if (consentData) {\n        const consent = JSON.parse(consentData);\n        this.hasUserConsent = consent.granted || false;\n        this.consentTimestamp = consent.timestamp;\n        this.consentVersion = consent.version || \"1.0\";\n      }\n\n      this.isOptedOut = optOutData === \"true\";\n    } catch (error) {\n      console.warn(\"Failed to load consent status:\", error);\n      this.hasUserConsent = false;\n      this.isOptedOut = false;\n    }\n  }\n\n  /**\n   * Save consent status to localStorage\n   */\n  saveConsentStatus() {\n    try {\n      const consentData = {\n        granted: this.hasUserConsent,\n        timestamp: this.consentTimestamp,\n        version: this.consentVersion,\n      };\n\n      localStorage.setItem(this.consentKey, JSON.stringify(consentData));\n      localStorage.setItem(this.optOutKey, this.isOptedOut.toString());\n    } catch (error) {\n      console.warn(\"Failed to save consent status:\", error);\n    }\n  }\n\n  /**\n   * Check if user has given consent for data collection\n   * @returns {boolean} True if user has consented\n   */\n  hasConsent() {\n    return (\n      this.hasUserConsent && !this.isOptedOut && !this.isDoNotTrackEnabled()\n    );\n  }\n\n  /**\n   * Check if Do Not Track is enabled in browser\n   * @returns {boolean} True if DNT is enabled\n   */\n  isDoNotTrackEnabled() {\n    return (\n      navigator.doNotTrack === \"1\" ||\n      navigator.msDoNotTrack === \"1\" ||\n      window.doNotTrack === \"1\"\n    );\n  }\n\n  /**\n   * Request consent from user (can be customized)\n   * @param {Object} options - Consent options\n   * @returns {Promise<boolean>} Promise that resolves with consent status\n   */\n  async requestConsent(options = {}) {\n    // If already consented or opted out, return current status\n    if (this.hasUserConsent || this.isOptedOut) {\n      return this.hasConsent();\n    }\n\n    // If DNT is enabled, respect it\n    if (this.isDoNotTrackEnabled()) {\n      console.log(\"Do Not Track detected, respecting user preference\");\n      return false;\n    }\n\n    // Default consent behavior (can be overridden)\n    const showConsentBanner = options.showBanner !== false;\n\n    if (showConsentBanner) {\n      return await this.showConsentBanner(options);\n    } else {\n      // Implicit consent for essential functionality\n      return this.grantConsent(\"implicit\");\n    }\n  }\n\n  /**\n   * Show consent banner to user\n   * @param {Object} options - Banner options\n   * @returns {Promise<boolean>} Promise that resolves with consent status\n   */\n  async showConsentBanner(options = {}) {\n    return new Promise((resolve) => {\n      // Check if banner already exists\n      if (document.getElementById(\"pavekit-consent-banner\")) {\n        resolve(this.hasConsent());\n        return;\n      }\n\n      // Create consent banner\n      const banner = this.createConsentBanner(options);\n      document.body.appendChild(banner);\n\n      // Handle consent responses\n      const handleResponse = (granted) => {\n        document.body.removeChild(banner);\n\n        if (granted) {\n          this.grantConsent(\"explicit\");\n        } else {\n          this.denyConsent();\n        }\n\n        resolve(this.hasConsent());\n      };\n\n      // Add event listeners\n      banner.querySelector(\"#pavekit-consent-accept\").onclick = () =>\n        handleResponse(true);\n      banner.querySelector(\"#pavekit-consent-decline\").onclick = () =>\n        handleResponse(false);\n\n      // Auto-hide after timeout if specified\n      if (options.timeout) {\n        setTimeout(() => {\n          if (document.body.contains(banner)) {\n            handleResponse(false);\n          }\n        }, options.timeout);\n      }\n    });\n  }\n\n  /**\n   * Create consent banner HTML element\n   * @param {Object} options - Banner customization options\n   * @returns {HTMLElement} Banner element\n   */\n  createConsentBanner(options = {}) {\n    const banner = document.createElement(\"div\");\n    banner.id = \"pavekit-consent-banner\";\n    banner.style.cssText = `\n      position: fixed;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      background: #2c3e50;\n      color: white;\n      padding: 15px 20px;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui;\n      font-size: 14px;\n      z-index: 999999;\n      box-shadow: 0 -2px 10px rgba(0,0,0,0.1);\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      flex-wrap: wrap;\n    `;\n\n    const message =\n      options.message ||\n      \"We use cookies and collect minimal data to improve your experience and send relevant onboarding emails. By continuing, you agree to our data collection practices.\";\n\n    const privacyUrl = options.privacyUrl || \"#\";\n\n    banner.innerHTML = `\n      <div style=\"flex: 1; margin-right: 20px; min-width: 300px;\">\n        <span>${message}</span>\n        <a href=\"${privacyUrl}\" target=\"_blank\" style=\"color: #3498db; text-decoration: underline; margin-left: 5px;\">\n          Privacy Policy\n        </a>\n      </div>\n      <div style=\"display: flex; gap: 10px; flex-wrap: wrap;\">\n        <button id=\"pavekit-consent-decline\" style=\"\n          background: transparent;\n          border: 1px solid #95a5a6;\n          color: #95a5a6;\n          padding: 8px 16px;\n          border-radius: 4px;\n          cursor: pointer;\n          font-size: 12px;\n        \">\n          Decline\n        </button>\n        <button id=\"pavekit-consent-accept\" style=\"\n          background: #27ae60;\n          border: none;\n          color: white;\n          padding: 8px 16px;\n          border-radius: 4px;\n          cursor: pointer;\n          font-size: 12px;\n        \">\n          Accept\n        </button>\n      </div>\n    `;\n\n    return banner;\n  }\n\n  /**\n   * Grant user consent\n   * @param {string} type - Consent type ('explicit', 'implicit')\n   * @returns {boolean} True if consent was granted\n   */\n  grantConsent(type = \"explicit\") {\n    this.hasUserConsent = true;\n    this.isOptedOut = false;\n    this.consentTimestamp = new Date().toISOString();\n    this.saveConsentStatus();\n\n    // Dispatch consent event\n    this.dispatchConsentEvent(\"granted\", {\n      type,\n      timestamp: this.consentTimestamp,\n    });\n\n    console.log(`PaveKit: User consent granted (${type})`);\n    return true;\n  }\n\n  /**\n   * Deny user consent\n   * @returns {boolean} False\n   */\n  denyConsent() {\n    this.hasUserConsent = false;\n    this.isOptedOut = false; // Not opted out, just declined\n    this.consentTimestamp = new Date().toISOString();\n    this.saveConsentStatus();\n\n    // Dispatch consent event\n    this.dispatchConsentEvent(\"denied\", { timestamp: this.consentTimestamp });\n\n    console.log(\"PaveKit: User consent denied\");\n    return false;\n  }\n\n  /**\n   * Opt user out completely\n   */\n  optOut() {\n    this.hasUserConsent = false;\n    this.isOptedOut = true;\n    this.consentTimestamp = new Date().toISOString();\n    this.saveConsentStatus();\n\n    // Clear any existing data\n    this.clearStoredData();\n\n    // Dispatch opt-out event\n    this.dispatchConsentEvent(\"opted-out\", {\n      timestamp: this.consentTimestamp,\n    });\n\n    console.log(\"PaveKit: User opted out completely\");\n  }\n\n  /**\n   * Opt user back in\n   * @returns {Promise<boolean>} Promise that resolves with consent status\n   */\n  async optIn() {\n    this.isOptedOut = false;\n    this.saveConsentStatus();\n\n    // Request fresh consent\n    return await this.requestConsent();\n  }\n\n  /**\n   * Clear all stored data\n   */\n  clearStoredData() {\n    try {\n      // Clear consent data\n      localStorage.removeItem(this.consentKey);\n      localStorage.removeItem(this.optOutKey);\n\n      // Clear any other PaveKit data\n      Object.keys(localStorage).forEach((key) => {\n        if (key.startsWith(\"pavekit_\")) {\n          localStorage.removeItem(key);\n        }\n      });\n\n      // Clear session storage as well\n      Object.keys(sessionStorage).forEach((key) => {\n        if (key.startsWith(\"pavekit_\")) {\n          sessionStorage.removeItem(key);\n        }\n      });\n    } catch (error) {\n      console.warn(\"Failed to clear stored data:\", error);\n    }\n  }\n\n  /**\n   * Dispatch consent-related events\n   * @param {string} type - Event type\n   * @param {Object} data - Event data\n   */\n  dispatchConsentEvent(type, data = {}) {\n    try {\n      const event = new CustomEvent(\"pavekit-consent\", {\n        detail: {\n          type,\n          ...data,\n        },\n      });\n\n      window.dispatchEvent(event);\n    } catch (error) {\n      console.warn(\"Failed to dispatch consent event:\", error);\n    }\n  }\n\n  /**\n   * Get consent status information\n   * @returns {Object} Consent status\n   */\n  getConsentStatus() {\n    return {\n      hasConsent: this.hasConsent(),\n      isOptedOut: this.isOptedOut,\n      consentTimestamp: this.consentTimestamp,\n      consentVersion: this.consentVersion,\n      doNotTrack: this.isDoNotTrackEnabled(),\n    };\n  }\n\n  /**\n   * Check if consent is required based on user's location (basic implementation)\n   * @returns {boolean} True if consent is required\n   */\n  isConsentRequired() {\n    // Basic implementation - in production, you might want to check user's location\n    // For now, assume GDPR applies to all users for maximum compliance\n    return true;\n  }\n\n  /**\n   * Get privacy-compliant user identifier\n   * @returns {string} Anonymous user identifier\n   */\n  getAnonymousId() {\n    let anonymousId = localStorage.getItem(\"pavekit_anonymous_id\");\n\n    if (!anonymousId) {\n      // Generate anonymous ID\n      anonymousId =\n        \"anon_\" + Date.now() + \"_\" + Math.random().toString(36).substr(2, 9);\n\n      try {\n        localStorage.setItem(\"pavekit_anonymous_id\", anonymousId);\n      } catch (error) {\n        // Fallback to session-based ID if localStorage fails\n        anonymousId = \"session_\" + Date.now();\n      }\n    }\n\n    return anonymousId;\n  }\n\n  /**\n   * Reset privacy manager to initial state\n   */\n  reset() {\n    this.clearStoredData();\n    this.hasUserConsent = false;\n    this.isOptedOut = false;\n    this.consentTimestamp = null;\n    this.consentVersion = \"1.0\";\n  }\n\n  /**\n   * Get data retention policy info\n   * @returns {Object} Data retention information\n   */\n  getDataRetentionInfo() {\n    return {\n      consentData: \"2 years\",\n      analyticsData: \"26 months\",\n      emailData: \"Until unsubscribe or opt-out\",\n      rightToErasure: \"Available on request\",\n      dataController: \"PaveKit Platform\",\n    };\n  }\n}\n\nexport default PrivacyManager;\n","/**\n * FormDetector - Detects and monitors signup forms on the page\n * Securely captures email addresses while filtering sensitive data\n */\nclass FormDetector {\n  constructor(securityUtils, apiClient, privacyManager) {\n    this.securityUtils = securityUtils;\n    this.apiClient = apiClient;\n    this.privacyManager = privacyManager;\n    this.isActive = false;\n    this.detectedForms = new Set();\n    this.processedSubmissions = new Set();\n    this.config = {\n      debounceDelay: 500,\n      maxFormsToMonitor: 10,\n      requireEmailField: true,\n      autoDetect: true,\n    };\n  }\n\n  /**\n   * Start form detection\n   * @param {Object} config - Detection configuration\n   */\n  start(config = {}) {\n    if (this.isActive) return;\n\n    this.config = { ...this.config, ...config };\n    this.isActive = true;\n\n    if (this.config.autoDetect) {\n      this.scanForForms();\n      this.attachDOMObserver();\n    }\n\n    this.attachGlobalFormListener();\n    console.log(\"FormDetector: Started\");\n  }\n\n  /**\n   * Stop form detection\n   */\n  stop() {\n    if (!this.isActive) return;\n\n    this.isActive = false;\n    this.detachGlobalFormListener();\n    this.detachDOMObserver();\n    this.detectedForms.clear();\n    this.processedSubmissions.clear();\n\n    console.log(\"FormDetector: Stopped\");\n  }\n\n  /**\n   * Scan existing forms on page load\n   */\n  scanForForms() {\n    const forms = document.querySelectorAll(\"form\");\n\n    forms.forEach((form) => {\n      if (this.detectedForms.size >= this.config.maxFormsToMonitor) return;\n\n      if (this.isSignupForm(form)) {\n        this.monitorForm(form);\n      }\n    });\n\n    console.log(`FormDetector: Found ${this.detectedForms.size} signup forms`);\n  }\n\n  /**\n   * Attach DOM observer to detect dynamically added forms\n   */\n  attachDOMObserver() {\n    if (this.domObserver) return;\n\n    this.domObserver = new MutationObserver((mutations) => {\n      mutations.forEach((mutation) => {\n        mutation.addedNodes.forEach((node) => {\n          if (node.nodeType === Node.ELEMENT_NODE) {\n            // Check if the added node is a form\n            if (node.tagName === \"FORM\" && this.isSignupForm(node)) {\n              this.monitorForm(node);\n            }\n\n            // Check for forms within added nodes\n            const forms = node.querySelectorAll\n              ? node.querySelectorAll(\"form\")\n              : [];\n            forms.forEach((form) => {\n              if (\n                this.detectedForms.size < this.config.maxFormsToMonitor &&\n                this.isSignupForm(form)\n              ) {\n                this.monitorForm(form);\n              }\n            });\n          }\n        });\n      });\n    });\n\n    this.domObserver.observe(document.body, {\n      childList: true,\n      subtree: true,\n    });\n  }\n\n  /**\n   * Detach DOM observer\n   */\n  detachDOMObserver() {\n    if (this.domObserver) {\n      this.domObserver.disconnect();\n      this.domObserver = null;\n    }\n  }\n\n  /**\n   * Attach global form submission listener\n   */\n  attachGlobalFormListener() {\n    this.formSubmitHandler = this.handleFormSubmit.bind(this);\n    document.addEventListener(\"submit\", this.formSubmitHandler, true);\n  }\n\n  /**\n   * Detach global form submission listener\n   */\n  detachGlobalFormListener() {\n    if (this.formSubmitHandler) {\n      document.removeEventListener(\"submit\", this.formSubmitHandler, true);\n      this.formSubmitHandler = null;\n    }\n  }\n\n  /**\n   * Handle form submission\n   * @param {Event} event - Submit event\n   */\n  async handleFormSubmit(event) {\n    if (!this.isActive || !this.privacyManager.hasConsent()) return;\n\n    const form = event.target;\n    if (!form || form.tagName !== \"FORM\") return;\n\n    // Prevent processing the same submission multiple times\n    const submissionId = this.getSubmissionId(form);\n    if (this.processedSubmissions.has(submissionId)) return;\n\n    if (this.isSignupForm(form)) {\n      this.processedSubmissions.add(submissionId);\n\n      // Add debouncing to prevent duplicate processing\n      setTimeout(() => {\n        this.processedSubmissions.delete(submissionId);\n      }, this.config.debounceDelay);\n\n      await this.processSignupForm(form);\n    }\n  }\n\n  /**\n   * Generate unique submission ID\n   * @param {HTMLFormElement} form - Form element\n   * @returns {string} Unique submission ID\n   */\n  getSubmissionId(form) {\n    const formData = new FormData(form);\n    const email = this.extractEmailFromForm(form);\n    const timestamp = Date.now();\n\n    return `${form.action || window.location.href}_${email}_${timestamp}`;\n  }\n\n  /**\n   * Check if form is a signup form\n   * @param {HTMLFormElement} form - Form element to check\n   * @returns {boolean} True if signup form\n   */\n  isSignupForm(form) {\n    if (!form || form.tagName !== \"FORM\") return false;\n\n    // Check for email field (required for signup)\n    const hasEmailField = this.hasEmailField(form);\n    if (this.config.requireEmailField && !hasEmailField) return false;\n\n    // Check form characteristics\n    const formAction = (form.action || \"\").toLowerCase();\n    const formId = (form.id || \"\").toLowerCase();\n    const formClass = (form.className || \"\").toLowerCase();\n\n    // Positive indicators\n    const signupIndicators = [\n      \"signup\",\n      \"sign-up\",\n      \"register\",\n      \"registration\",\n      \"join\",\n      \"create\",\n      \"account\",\n      \"member\",\n    ];\n\n    // Negative indicators (forms to avoid)\n    const excludeIndicators = [\n      \"login\",\n      \"signin\",\n      \"sign-in\",\n      \"password\",\n      \"reset\",\n      \"forgot\",\n      \"recover\",\n      \"search\",\n      \"newsletter\",\n      \"contact\",\n      \"comment\",\n      \"review\",\n      \"feedback\",\n      \"support\",\n    ];\n\n    const formText = `${formAction} ${formId} ${formClass}`.toLowerCase();\n\n    // Exclude non-signup forms\n    if (excludeIndicators.some((indicator) => formText.includes(indicator))) {\n      return false;\n    }\n\n    // Check for signup indicators\n    const hasSignupIndicators = signupIndicators.some((indicator) =>\n      formText.includes(indicator),\n    );\n\n    // Check form structure\n    const hasPasswordField =\n      form.querySelector('input[type=\"password\"]') !== null;\n    const fieldCount = form.querySelectorAll(\n      'input[type=\"text\"], input[type=\"email\"]',\n    ).length;\n\n    // Heuristics for signup form detection\n    return (\n      hasEmailField &&\n      (hasSignupIndicators ||\n        (hasPasswordField && fieldCount >= 2) || // Email + name + password\n        this.hasSignupButtons(form))\n    );\n  }\n\n  /**\n   * Check if form has email field\n   * @param {HTMLFormElement} form - Form element\n   * @returns {boolean} True if has email field\n   */\n  hasEmailField(form) {\n    const emailInputs = form.querySelectorAll('input[type=\"email\"]');\n    if (emailInputs.length > 0) return true;\n\n    // Check for inputs with email-like names\n    const emailLikeInputs = form.querySelectorAll(\n      'input[name*=\"email\"], input[id*=\"email\"], input[name*=\"mail\"], input[id*=\"mail\"]',\n    );\n    return emailLikeInputs.length > 0;\n  }\n\n  /**\n   * Check if form has signup buttons\n   * @param {HTMLFormElement} form - Form element\n   * @returns {boolean} True if has signup buttons\n   */\n  hasSignupButtons(form) {\n    const buttons = form.querySelectorAll('button, input[type=\"submit\"]');\n\n    return Array.from(buttons).some((button) => {\n      const buttonText = (\n        button.textContent ||\n        button.value ||\n        \"\"\n      ).toLowerCase();\n      return [\"signup\", \"sign up\", \"register\", \"join\", \"create account\"].some(\n        (text) => buttonText.includes(text),\n      );\n    });\n  }\n\n  /**\n   * Monitor a specific form\n   * @param {HTMLFormElement} form - Form to monitor\n   */\n  monitorForm(form) {\n    if (this.detectedForms.has(form)) return;\n\n    this.detectedForms.add(form);\n\n    // Add visual indicator in debug mode\n    if (this.config.debug) {\n      form.style.outline = \"2px dashed #27ae60\";\n      form.title = \"PaveKit: Monitoring this signup form\";\n    }\n\n    console.log(\"FormDetector: Monitoring signup form\", {\n      action: form.action,\n      id: form.id,\n      className: form.className,\n    });\n  }\n\n  /**\n   * Process signup form submission\n   * @param {HTMLFormElement} form - Submitted form\n   */\n  async processSignupForm(form) {\n    try {\n      const email = this.extractEmailFromForm(form);\n      if (!email || !this.securityUtils.isValidEmail(email)) {\n        console.warn(\"FormDetector: Invalid or missing email in signup form\");\n        return;\n      }\n\n      const safeData = this.extractSafeData(form);\n      const signupData = {\n        email: email,\n        signup_method: \"form\",\n        page_url: window.location.href,\n        referrer: document.referrer,\n        form_data: safeData,\n        metadata: {\n          form_action: form.action || \"\",\n          form_method: form.method || \"get\",\n          detected_at: new Date().toISOString(),\n        },\n      };\n\n      await this.apiClient.registerSignup(signupData);\n      console.log(\"FormDetector: Signup registered successfully\", { email });\n    } catch (error) {\n      console.error(\"FormDetector: Failed to process signup form:\", error);\n    }\n  }\n\n  /**\n   * Extract email from form\n   * @param {HTMLFormElement} form - Form element\n   * @returns {string|null} Email address or null\n   */\n  extractEmailFromForm(form) {\n    // Try email input type first\n    const emailInput = form.querySelector('input[type=\"email\"]');\n    if (emailInput && emailInput.value) {\n      return emailInput.value.trim();\n    }\n\n    // Try inputs with email-like names\n    const emailLikeSelectors = [\n      'input[name*=\"email\" i]',\n      'input[id*=\"email\" i]',\n      'input[name*=\"mail\" i]',\n      'input[id*=\"mail\" i]',\n    ];\n\n    for (const selector of emailLikeSelectors) {\n      const input = form.querySelector(selector);\n      if (\n        input &&\n        input.value &&\n        this.securityUtils.isValidEmail(input.value)\n      ) {\n        return input.value.trim();\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Extract safe data from form (excluding sensitive fields)\n   * @param {HTMLFormElement} form - Form element\n   * @returns {Object} Safe form data\n   */\n  extractSafeData(form) {\n    const safeData = {};\n    const formData = new FormData(form);\n\n    formData.forEach((value, key) => {\n      if (!value || value.trim() === \"\") return;\n\n      const input = form.querySelector(`[name=\"${key}\"]`);\n      const inputType = input ? input.type : null;\n\n      if (this.securityUtils.isSafeToCapture(key, inputType, input)) {\n        safeData[key] = this.securityUtils.sanitizeText(value);\n      }\n    });\n\n    return safeData;\n  }\n\n  /**\n   * Get detector status\n   * @returns {Object} Status information\n   */\n  getStatus() {\n    return {\n      isActive: this.isActive,\n      detectedForms: this.detectedForms.size,\n      processedSubmissions: this.processedSubmissions.size,\n      config: this.config,\n    };\n  }\n\n  /**\n   * Update detector configuration\n   * @param {Object} newConfig - New configuration\n   */\n  updateConfig(newConfig) {\n    this.config = { ...this.config, ...newConfig };\n\n    if (this.isActive) {\n      // Restart with new config\n      this.stop();\n      this.start(this.config);\n    }\n  }\n\n  /**\n   * Get detected forms information\n   * @returns {Array} Array of form information\n   */\n  getDetectedForms() {\n    return Array.from(this.detectedForms).map((form) => ({\n      id: form.id || null,\n      className: form.className || null,\n      action: form.action || null,\n      method: form.method || \"get\",\n      fieldCount: form.querySelectorAll(\"input\").length,\n      hasEmailField: this.hasEmailField(form),\n      hasPasswordField: form.querySelector('input[type=\"password\"]') !== null,\n    }));\n  }\n}\n\nexport default FormDetector;\n","/**\n * OAuthDetector - Detects OAuth authentication flows and signup completions\n * Securely identifies OAuth returns without accessing sensitive tokens\n */\nclass OAuthDetector {\n  constructor(securityUtils, apiClient, privacyManager) {\n    this.securityUtils = securityUtils;\n    this.apiClient = apiClient;\n    this.privacyManager = privacyManager;\n    this.isActive = false;\n    this.config = {\n      checkInterval: 1000, // Check every second\n      maxChecks: 30, // Stop checking after 30 seconds\n      cleanupDelay: 5000, // Clean URL parameters after 5 seconds\n      supportedProviders: [\n        \"google\",\n        \"github\",\n        \"microsoft\",\n        \"facebook\",\n        \"twitter\",\n      ],\n    };\n    this.checkCount = 0;\n    this.intervalId = null;\n    this.detectedFlows = new Set();\n  }\n\n  /**\n   * Start OAuth flow detection\n   * @param {Object} config - Detection configuration\n   */\n  start(config = {}) {\n    if (this.isActive) return;\n\n    this.config = { ...this.config, ...config };\n    this.isActive = true;\n    this.checkCount = 0;\n\n    // Check immediately on start\n    this.checkForOAuthReturn();\n\n    // Set up periodic checking\n    this.intervalId = setInterval(() => {\n      this.checkForOAuthReturn();\n      this.checkCount++;\n\n      // Stop checking after max attempts\n      if (this.checkCount >= this.config.maxChecks) {\n        this.stopPeriodicChecking();\n      }\n    }, this.config.checkInterval);\n\n    // Listen for URL changes (SPA navigation)\n    this.attachURLChangeListener();\n\n    console.log(\"OAuthDetector: Started\");\n  }\n\n  /**\n   * Stop OAuth flow detection\n   */\n  stop() {\n    if (!this.isActive) return;\n\n    this.isActive = false;\n    this.stopPeriodicChecking();\n    this.detachURLChangeListener();\n    this.detectedFlows.clear();\n\n    console.log(\"OAuthDetector: Stopped\");\n  }\n\n  /**\n   * Stop periodic checking\n   */\n  stopPeriodicChecking() {\n    if (this.intervalId) {\n      clearInterval(this.intervalId);\n      this.intervalId = null;\n    }\n  }\n\n  /**\n   * Attach URL change listener for SPAs\n   */\n  attachURLChangeListener() {\n    this.originalPushState = history.pushState;\n    this.originalReplaceState = history.replaceState;\n\n    const self = this;\n\n    history.pushState = function () {\n      self.originalPushState.apply(history, arguments);\n      setTimeout(() => self.checkForOAuthReturn(), 100);\n    };\n\n    history.replaceState = function () {\n      self.originalReplaceState.apply(history, arguments);\n      setTimeout(() => self.checkForOAuthReturn(), 100);\n    };\n\n    window.addEventListener(\"popstate\", () => {\n      setTimeout(() => this.checkForOAuthReturn(), 100);\n    });\n  }\n\n  /**\n   * Detach URL change listener\n   */\n  detachURLChangeListener() {\n    if (this.originalPushState) {\n      history.pushState = this.originalPushState;\n    }\n    if (this.originalReplaceState) {\n      history.replaceState = this.originalReplaceState;\n    }\n  }\n\n  /**\n   * Check for OAuth return indicators in current URL\n   */\n  async checkForOAuthReturn() {\n    if (!this.isActive) {\n      console.log(\"OAuthDetector: Not active, skipping check\");\n      return;\n    }\n\n    if (!this.privacyManager.hasConsent()) {\n      console.log(\"OAuthDetector: No consent granted, skipping check\");\n      return;\n    }\n\n    console.log(\n      \"OAuthDetector: Checking for OAuth return in URL:\",\n      window.location.href,\n    );\n\n    const currentURL = window.location.href;\n    const urlParams = new URLSearchParams(window.location.search);\n    const hashParams = new URLSearchParams(window.location.hash.substring(1));\n\n    // Prevent processing the same OAuth return multiple times\n    const flowId = this.generateFlowId(currentURL);\n    if (this.detectedFlows.has(flowId)) return;\n\n    const oauthData = this.detectOAuthFlow(urlParams, hashParams);\n\n    console.log(\"OAuthDetector: Detection result:\", oauthData);\n\n    if (oauthData.isOAuthReturn) {\n      console.log(\"OAuthDetector: Valid OAuth return detected, processing...\");\n      this.detectedFlows.add(flowId);\n      await this.processOAuthReturn(oauthData);\n\n      // Schedule URL cleanup\n      setTimeout(() => {\n        this.cleanOAuthParams();\n      }, this.config.cleanupDelay);\n    }\n  }\n\n  /**\n   * Generate unique flow ID for deduplication\n   * @param {string} url - Current URL\n   * @returns {string} Unique flow identifier\n   */\n  generateFlowId(url) {\n    const urlWithoutTokens = url\n      .replace(/[?&](code|access_token|id_token)=[^&]*/g, \"\")\n      .replace(/[?&](state|scope)=[^&]*/g, \"\");\n\n    return `${urlWithoutTokens}_${Date.now()}`;\n  }\n\n  /**\n   * Detect OAuth flow from URL parameters\n   * @param {URLSearchParams} urlParams - URL search parameters\n   * @param {URLSearchParams} hashParams - URL hash parameters\n   * @returns {Object} OAuth detection result\n   */\n  detectOAuthFlow(urlParams, hashParams) {\n    const result = {\n      isOAuthReturn: false,\n      provider: null,\n      flowType: null,\n      hasError: false,\n      errorDescription: null,\n      state: null,\n    };\n\n    // Check for OAuth authorization code (server-side flow)\n    const authCode = urlParams.get(\"code\");\n    if (authCode) {\n      result.isOAuthReturn = true;\n      result.flowType = \"authorization_code\";\n      result.state = urlParams.get(\"state\");\n    }\n\n    // Check for OAuth implicit flow tokens (client-side flow)\n    const accessToken =\n      hashParams.get(\"access_token\") || urlParams.get(\"access_token\");\n    const idToken = hashParams.get(\"id_token\") || urlParams.get(\"id_token\");\n\n    if (accessToken || idToken) {\n      result.isOAuthReturn = true;\n      result.flowType = \"implicit\";\n      result.state = hashParams.get(\"state\") || urlParams.get(\"state\");\n    }\n\n    // Check for OAuth errors\n    const error = urlParams.get(\"error\") || hashParams.get(\"error\");\n    if (error) {\n      result.isOAuthReturn = true;\n      result.hasError = true;\n      result.errorDescription =\n        urlParams.get(\"error_description\") ||\n        hashParams.get(\"error_description\");\n    }\n\n    // Detect provider from referrer or URL patterns\n    if (result.isOAuthReturn) {\n      result.provider = this.detectOAuthProvider();\n    }\n\n    // Additional validation\n    if (result.isOAuthReturn) {\n      result.isOAuthReturn = this.validateOAuthReturn();\n      console.log(\"OAuthDetector: Validation result:\", result.isOAuthReturn);\n    }\n\n    return result;\n  }\n\n  /**\n   * Detect OAuth provider from referrer and URL patterns\n   * @returns {string|null} OAuth provider name\n   */\n  detectOAuthProvider() {\n    const referrer = document.referrer.toLowerCase();\n    const currentURL = window.location.href.toLowerCase();\n\n    // Provider detection patterns\n    const providers = {\n      google: [\"accounts.google.com\", \"googleapis.com\", \"google.com/oauth\"],\n      github: [\"github.com\", \"api.github.com\"],\n      microsoft: [\"login.microsoftonline.com\", \"login.live.com\", \"outlook.com\"],\n      facebook: [\"facebook.com\", \"fb.com\"],\n      twitter: [\"twitter.com\", \"api.twitter.com\"],\n      linkedin: [\"linkedin.com\", \"api.linkedin.com\"],\n      apple: [\"appleid.apple.com\"],\n    };\n\n    // Check referrer first\n    for (const [provider, domains] of Object.entries(providers)) {\n      if (domains.some((domain) => referrer.includes(domain))) {\n        return provider;\n      }\n    }\n\n    // Check current URL for provider hints\n    for (const [provider, domains] of Object.entries(providers)) {\n      if (domains.some((domain) => currentURL.includes(domain))) {\n        return provider;\n      }\n    }\n\n    // Check for provider in state parameter or URL path\n    const urlParams = new URLSearchParams(window.location.search);\n    const state = urlParams.get(\"state\");\n\n    if (state) {\n      const stateLower = state.toLowerCase();\n      for (const provider of Object.keys(providers)) {\n        if (stateLower.includes(provider)) {\n          return provider;\n        }\n      }\n    }\n\n    return \"unknown\";\n  }\n\n  /**\n   * Validate OAuth return using additional heuristics\n   * @returns {boolean} True if valid OAuth return\n   */\n  validateOAuthReturn() {\n    // Check if referrer is from a known OAuth provider\n    const referrer = document.referrer.toLowerCase();\n    const hasOAuthReferrer = this.config.supportedProviders.some(\n      (provider) =>\n        referrer.includes(provider) ||\n        referrer.includes(\"oauth\") ||\n        referrer.includes(\"auth\"),\n    );\n\n    // Check for OAuth-related URL patterns\n    const currentURL = window.location.href.toLowerCase();\n    const hasOAuthPattern =\n      currentURL.includes(\"callback\") ||\n      currentURL.includes(\"redirect\") ||\n      currentURL.includes(\"auth\") ||\n      currentURL.includes(\"oauth\");\n\n    // Check for recent navigation (OAuth flows typically complete quickly)\n    const navigationTiming = performance.getEntriesByType(\"navigation\")[0];\n    const isRecentNavigation =\n      navigationTiming && Date.now() - navigationTiming.loadEventStart < 10000;\n\n    return hasOAuthReferrer || hasOAuthPattern || isRecentNavigation;\n  }\n\n  /**\n   * Process OAuth return and register signup\n   * @param {Object} oauthData - OAuth detection data\n   */\n  async processOAuthReturn(oauthData) {\n    console.log(\"OAuthDetector: processOAuthReturn called with:\", oauthData);\n\n    if (oauthData.hasError) {\n      console.warn(\n        \"OAuthDetector: OAuth flow completed with error:\",\n        oauthData.errorDescription,\n      );\n      return;\n    }\n\n    try {\n      // Extract email from page content if available\n      console.log(\"OAuthDetector: Extracting email from page...\");\n      const email = await this.extractEmailFromPage();\n      console.log(\"OAuthDetector: Extracted email:\", email || \"none found\");\n\n      const signupData = {\n        email: email || \"oauth_user@pending.com\", // Placeholder if email not found\n        signup_method: `oauth_${oauthData.provider}`,\n        page_url: window.location.href,\n        referrer: document.referrer,\n        metadata: {\n          oauth_provider: oauthData.provider,\n          oauth_flow_type: oauthData.flowType,\n          oauth_state: oauthData.state,\n          detected_at: new Date().toISOString(),\n          user_agent: navigator.userAgent,\n        },\n      };\n\n      console.log(\"OAuthDetector: Sending signup data to backend:\", signupData);\n      const result = await this.apiClient.registerSignup(signupData);\n      console.log(\"OAuthDetector: OAuth signup registered successfully!\", {\n        provider: oauthData.provider,\n        email: email ? \"found\" : \"pending\",\n        result: result,\n      });\n    } catch (error) {\n      console.error(\"OAuthDetector: Failed to process OAuth return:\", error);\n      console.error(\"OAuthDetector: Error details:\", {\n        message: error.message,\n        stack: error.stack,\n      });\n    }\n  }\n\n  /**\n   * Extract email from page content after OAuth completion\n   * @returns {Promise<string|null>} Email address or null\n   */\n  async extractEmailFromPage() {\n    // Wait a bit for page to update after OAuth\n    await this.delay(1000);\n\n    // Common selectors for email display\n    const emailSelectors = [\n      \"[data-email]\",\n      \".email\",\n      \".user-email\",\n      \".account-email\",\n      'input[type=\"email\"][value]',\n      '[class*=\"email\" i]:not([type=\"password\"])',\n      '[id*=\"email\" i]:not([type=\"password\"])',\n    ];\n\n    for (const selector of emailSelectors) {\n      const elements = document.querySelectorAll(selector);\n\n      for (const element of elements) {\n        const email = this.extractEmailFromElement(element);\n        if (email && this.securityUtils.isValidEmail(email)) {\n          return email;\n        }\n      }\n    }\n\n    // Try to find email in text content (less reliable)\n    const emailRegex = /[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}/g;\n    const pageText = document.body.textContent || \"\";\n    const emailMatches = pageText.match(emailRegex);\n\n    if (emailMatches && emailMatches.length > 0) {\n      // Return the first valid email found\n      for (const email of emailMatches) {\n        if (this.securityUtils.isValidEmail(email)) {\n          return email;\n        }\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Extract email from a DOM element\n   * @param {HTMLElement} element - DOM element\n   * @returns {string|null} Email or null\n   */\n  extractEmailFromElement(element) {\n    // Try data attribute\n    if (element.dataset && element.dataset.email) {\n      return element.dataset.email;\n    }\n\n    // Try input value\n    if (element.value) {\n      return element.value;\n    }\n\n    // Try text content\n    if (element.textContent) {\n      const text = element.textContent.trim();\n      if (this.securityUtils.isValidEmail(text)) {\n        return text;\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Clean OAuth parameters from URL for security\n   */\n  cleanOAuthParams() {\n    if (!this.isActive) return;\n\n    const url = new URL(window.location.href);\n    const params = url.searchParams;\n\n    // Parameters to remove for security\n    const sensitiveParams = [\n      \"code\",\n      \"access_token\",\n      \"id_token\",\n      \"refresh_token\",\n      \"token_type\",\n      \"expires_in\",\n      \"scope\",\n    ];\n\n    let paramsChanged = false;\n\n    sensitiveParams.forEach((param) => {\n      if (params.has(param)) {\n        params.delete(param);\n        paramsChanged = true;\n      }\n    });\n\n    // Clean hash parameters\n    if (\n      window.location.hash.includes(\"access_token\") ||\n      window.location.hash.includes(\"id_token\")\n    ) {\n      url.hash = \"\";\n      paramsChanged = true;\n    }\n\n    // Update URL if parameters were removed\n    if (paramsChanged) {\n      const newURL = url.toString();\n      history.replaceState({}, document.title, newURL);\n      console.log(\"OAuthDetector: Cleaned sensitive OAuth parameters from URL\");\n    }\n  }\n\n  /**\n   * Delay execution\n   * @param {number} ms - Milliseconds to delay\n   * @returns {Promise} Promise that resolves after delay\n   */\n  delay(ms) {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n  }\n\n  /**\n   * Get detector status\n   * @returns {Object} Status information\n   */\n  getStatus() {\n    return {\n      isActive: this.isActive,\n      checkCount: this.checkCount,\n      detectedFlows: this.detectedFlows.size,\n      config: this.config,\n      intervalActive: !!this.intervalId,\n    };\n  }\n\n  /**\n   * Update detector configuration\n   * @param {Object} newConfig - New configuration\n   */\n  updateConfig(newConfig) {\n    this.config = { ...this.config, ...newConfig };\n\n    if (this.isActive) {\n      // Restart with new config\n      this.stop();\n      this.start(this.config);\n    }\n  }\n\n  /**\n   * Get detected OAuth flows information\n   * @returns {Array} Array of detected flow information\n   */\n  getDetectedFlows() {\n    return Array.from(this.detectedFlows).map((flowId) => ({\n      flowId,\n      detectedAt: new Date().toISOString(),\n      url: window.location.href,\n    }));\n  }\n\n  /**\n   * Manual OAuth detection trigger\n   * @returns {Promise<Object>} Detection result\n   */\n  async manualDetection() {\n    const urlParams = new URLSearchParams(window.location.search);\n    const hashParams = new URLSearchParams(window.location.hash.substring(1));\n\n    return this.detectOAuthFlow(urlParams, hashParams);\n  }\n}\n\nexport default OAuthDetector;\n","/**\n * ActivityDetector - Tracks user activity and engagement with privacy compliance\n * Monitors page visibility, scroll, clicks, and time on page with user consent\n */\nclass ActivityDetector {\n  constructor(securityUtils, apiClient, privacyManager) {\n    this.securityUtils = securityUtils;\n    this.apiClient = apiClient;\n    this.privacyManager = privacyManager;\n    this.isActive = false;\n    this.config = {\n      heartbeatInterval: 300000, // 5 minutes\n      minActivityDuration: 30000, // 30 seconds minimum before tracking\n      trackScroll: true,\n      trackClicks: true,\n      trackTimeOnPage: true,\n      trackPageVisibility: true,\n      maxInactivityTime: 900000, // 15 minutes max inactivity\n      debounceDelay: 1000, // 1 second debounce for events\n    };\n\n    this.sessionData = {\n      startTime: null,\n      lastActivity: null,\n      totalActiveTime: 0,\n      pageViews: 0,\n      scrollDepth: 0,\n      clickCount: 0,\n      userEmail: null,\n      isVisible: true,\n    };\n\n    this.intervals = {};\n    this.eventHandlers = {};\n    this.lastHeartbeat = null;\n    this.inactivityTimer = null;\n  }\n\n  /**\n   * Start activity tracking\n   * @param {Object} config - Activity tracking configuration\n   * @param {string} userEmail - User email for tracking (optional)\n   */\n  start(config = {}, userEmail = null) {\n    if (this.isActive) return;\n\n    this.config = { ...this.config, ...config };\n    this.sessionData.userEmail = userEmail;\n    this.isActive = true;\n\n    this.initializeSession();\n    this.attachEventListeners();\n    this.startHeartbeat();\n    this.startInactivityTimer();\n\n    console.log(\"ActivityDetector: Started tracking user activity\");\n  }\n\n  /**\n   * Stop activity tracking\n   */\n  stop() {\n    if (!this.isActive) return;\n\n    this.isActive = false;\n    this.detachEventListeners();\n    this.stopHeartbeat();\n    this.stopInactivityTimer();\n    this.sendFinalActivity();\n\n    console.log(\"ActivityDetector: Stopped tracking user activity\");\n  }\n\n  /**\n   * Initialize tracking session\n   */\n  initializeSession() {\n    const now = Date.now();\n    this.sessionData.startTime = now;\n    this.sessionData.lastActivity = now;\n    this.sessionData.pageViews = 1;\n    this.sessionData.isVisible = !document.hidden;\n\n    // Load previous session data if available\n    this.loadSessionData();\n  }\n\n  /**\n   * Load session data from storage\n   */\n  loadSessionData() {\n    try {\n      const stored = sessionStorage.getItem(\"pavekit_activity_session\");\n      if (stored) {\n        const data = JSON.parse(stored);\n\n        // Merge with current session if within reasonable time\n        const timeDiff = Date.now() - data.lastActivity;\n        if (timeDiff < this.config.maxInactivityTime) {\n          this.sessionData.totalActiveTime += data.totalActiveTime || 0;\n          this.sessionData.pageViews += data.pageViews || 0;\n          this.sessionData.clickCount += data.clickCount || 0;\n          this.sessionData.scrollDepth = Math.max(\n            this.sessionData.scrollDepth,\n            data.scrollDepth || 0,\n          );\n        }\n      }\n    } catch (error) {\n      console.warn(\"ActivityDetector: Failed to load session data:\", error);\n    }\n  }\n\n  /**\n   * Save session data to storage\n   */\n  saveSessionData() {\n    try {\n      sessionStorage.setItem(\n        \"pavekit_activity_session\",\n        JSON.stringify({\n          ...this.sessionData,\n          savedAt: Date.now(),\n        }),\n      );\n    } catch (error) {\n      console.warn(\"ActivityDetector: Failed to save session data:\", error);\n    }\n  }\n\n  /**\n   * Attach event listeners for activity tracking\n   */\n  attachEventListeners() {\n    // Page visibility changes\n    if (this.config.trackPageVisibility) {\n      this.eventHandlers.visibilityChange =\n        this.handleVisibilityChange.bind(this);\n      document.addEventListener(\n        \"visibilitychange\",\n        this.eventHandlers.visibilityChange,\n      );\n    }\n\n    // Scroll tracking\n    if (this.config.trackScroll) {\n      this.eventHandlers.scroll = this.debounce(\n        this.handleScroll.bind(this),\n        this.config.debounceDelay,\n      );\n      window.addEventListener(\"scroll\", this.eventHandlers.scroll, {\n        passive: true,\n      });\n    }\n\n    // Click tracking (safe clicks only)\n    if (this.config.trackClicks) {\n      this.eventHandlers.click = this.handleClick.bind(this);\n      document.addEventListener(\"click\", this.eventHandlers.click, true);\n    }\n\n    // Mouse movement (for activity detection)\n    this.eventHandlers.mouseMove = this.debounce(\n      this.updateActivity.bind(this),\n      this.config.debounceDelay,\n    );\n    document.addEventListener(\"mousemove\", this.eventHandlers.mouseMove, {\n      passive: true,\n    });\n\n    // Keyboard activity\n    this.eventHandlers.keyPress = this.debounce(\n      this.updateActivity.bind(this),\n      this.config.debounceDelay,\n    );\n    document.addEventListener(\"keydown\", this.eventHandlers.keyPress, {\n      passive: true,\n    });\n\n    // Page unload\n    this.eventHandlers.beforeUnload = this.handleBeforeUnload.bind(this);\n    window.addEventListener(\"beforeunload\", this.eventHandlers.beforeUnload);\n\n    // Focus/blur events\n    this.eventHandlers.focus = this.updateActivity.bind(this);\n    this.eventHandlers.blur = this.handleBlur.bind(this);\n    window.addEventListener(\"focus\", this.eventHandlers.focus);\n    window.addEventListener(\"blur\", this.eventHandlers.blur);\n  }\n\n  /**\n   * Detach event listeners\n   */\n  detachEventListeners() {\n    if (this.eventHandlers.visibilityChange) {\n      document.removeEventListener(\n        \"visibilitychange\",\n        this.eventHandlers.visibilityChange,\n      );\n    }\n    if (this.eventHandlers.scroll) {\n      window.removeEventListener(\"scroll\", this.eventHandlers.scroll);\n    }\n    if (this.eventHandlers.click) {\n      document.removeEventListener(\"click\", this.eventHandlers.click, true);\n    }\n    if (this.eventHandlers.mouseMove) {\n      document.removeEventListener(\"mousemove\", this.eventHandlers.mouseMove);\n    }\n    if (this.eventHandlers.keyPress) {\n      document.removeEventListener(\"keydown\", this.eventHandlers.keyPress);\n    }\n    if (this.eventHandlers.beforeUnload) {\n      window.removeEventListener(\n        \"beforeunload\",\n        this.eventHandlers.beforeUnload,\n      );\n    }\n    if (this.eventHandlers.focus) {\n      window.removeEventListener(\"focus\", this.eventHandlers.focus);\n    }\n    if (this.eventHandlers.blur) {\n      window.removeEventListener(\"blur\", this.eventHandlers.blur);\n    }\n\n    this.eventHandlers = {};\n  }\n\n  /**\n   * Handle page visibility changes\n   */\n  handleVisibilityChange() {\n    const isVisible = !document.hidden;\n\n    if (isVisible && !this.sessionData.isVisible) {\n      // Page became visible\n      this.sessionData.isVisible = true;\n      this.updateActivity();\n      this.startHeartbeat();\n    } else if (!isVisible && this.sessionData.isVisible) {\n      // Page became hidden\n      this.sessionData.isVisible = false;\n      this.stopHeartbeat();\n      this.sendActivityUpdate();\n    }\n  }\n\n  /**\n   * Handle scroll events\n   */\n  handleScroll() {\n    if (!this.config.trackScroll || !this.sessionData.isVisible) return;\n\n    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n    const documentHeight = Math.max(\n      document.body.scrollHeight,\n      document.documentElement.scrollHeight,\n    );\n    const windowHeight = window.innerHeight;\n\n    const scrollPercentage = Math.round(\n      ((scrollTop + windowHeight) / documentHeight) * 100,\n    );\n    this.sessionData.scrollDepth = Math.max(\n      this.sessionData.scrollDepth,\n      scrollPercentage,\n    );\n\n    this.updateActivity();\n  }\n\n  /**\n   * Handle click events (secure clicks only)\n   * @param {Event} event - Click event\n   */\n  handleClick(event) {\n    if (!this.config.trackClicks || !this.sessionData.isVisible) return;\n\n    const target = event.target;\n\n    // Only track safe elements (avoid sensitive areas)\n    if (this.isSafeClickTarget(target)) {\n      this.sessionData.clickCount++;\n      this.updateActivity();\n    }\n  }\n\n  /**\n   * Check if click target is safe to track\n   * @param {HTMLElement} target - Click target element\n   * @returns {boolean} True if safe to track\n   */\n  isSafeClickTarget(target) {\n    if (!target || !target.tagName) return false;\n\n    const tagName = target.tagName.toLowerCase();\n    const className = (target.className || \"\").toLowerCase();\n    const id = (target.id || \"\").toLowerCase();\n\n    // Avoid sensitive elements\n    const sensitivePatterns = [\"password\", \"hidden\", \"token\", \"key\", \"secret\"];\n    const elementText = `${className} ${id}`.toLowerCase();\n\n    if (sensitivePatterns.some((pattern) => elementText.includes(pattern))) {\n      return false;\n    }\n\n    // Safe elements to track\n    const safeElements = [\n      \"a\",\n      \"button\",\n      \"span\",\n      \"div\",\n      \"p\",\n      \"h1\",\n      \"h2\",\n      \"h3\",\n      \"h4\",\n      \"h5\",\n      \"h6\",\n    ];\n    return safeElements.includes(tagName);\n  }\n\n  /**\n   * Handle page blur (window loses focus)\n   */\n  handleBlur() {\n    this.stopHeartbeat();\n    this.sendActivityUpdate();\n  }\n\n  /**\n   * Handle before page unload\n   */\n  handleBeforeUnload() {\n    this.sendFinalActivity();\n    this.saveSessionData();\n  }\n\n  /**\n   * Update activity timestamp\n   */\n  updateActivity() {\n    const now = Date.now();\n\n    if (this.sessionData.lastActivity) {\n      const timeDiff = now - this.sessionData.lastActivity;\n\n      // Only count time if user was active (not idle too long)\n      if (timeDiff < this.config.maxInactivityTime) {\n        this.sessionData.totalActiveTime += timeDiff;\n      }\n    }\n\n    this.sessionData.lastActivity = now;\n    this.restartInactivityTimer();\n  }\n\n  /**\n   * Start heartbeat for regular activity updates\n   */\n  startHeartbeat() {\n    if (this.intervals.heartbeat) return;\n\n    this.intervals.heartbeat = setInterval(() => {\n      if (this.sessionData.isVisible && this.privacyManager.hasConsent()) {\n        this.sendActivityUpdate();\n      }\n    }, this.config.heartbeatInterval);\n  }\n\n  /**\n   * Stop heartbeat\n   */\n  stopHeartbeat() {\n    if (this.intervals.heartbeat) {\n      clearInterval(this.intervals.heartbeat);\n      this.intervals.heartbeat = null;\n    }\n  }\n\n  /**\n   * Start inactivity timer\n   */\n  startInactivityTimer() {\n    this.restartInactivityTimer();\n  }\n\n  /**\n   * Restart inactivity timer\n   */\n  restartInactivityTimer() {\n    if (this.inactivityTimer) {\n      clearTimeout(this.inactivityTimer);\n    }\n\n    this.inactivityTimer = setTimeout(() => {\n      this.handleInactivity();\n    }, this.config.maxInactivityTime);\n  }\n\n  /**\n   * Stop inactivity timer\n   */\n  stopInactivityTimer() {\n    if (this.inactivityTimer) {\n      clearTimeout(this.inactivityTimer);\n      this.inactivityTimer = null;\n    }\n  }\n\n  /**\n   * Handle user inactivity\n   */\n  handleInactivity() {\n    console.log(\"ActivityDetector: User inactive, pausing tracking\");\n    this.stopHeartbeat();\n    this.sendActivityUpdate();\n  }\n\n  /**\n   * Send activity update to backend\n   */\n  async sendActivityUpdate() {\n    if (!this.privacyManager.hasConsent() || !this.sessionData.userEmail) {\n      return;\n    }\n\n    // Only send if minimum activity duration is met\n    if (this.sessionData.totalActiveTime < this.config.minActivityDuration) {\n      return;\n    }\n\n    try {\n      const activityData = {\n        email: this.sessionData.userEmail,\n        page_url: this.securityUtils.isSafeURL()\n          ? window.location.href\n          : \"[filtered]\",\n        activity_data: {\n          time_on_page: Math.round(this.sessionData.totalActiveTime / 1000), // seconds\n          scroll_depth: this.sessionData.scrollDepth,\n          click_count: this.sessionData.clickCount,\n          page_views: this.sessionData.pageViews,\n          is_visible: this.sessionData.isVisible,\n          session_duration: Date.now() - this.sessionData.startTime,\n        },\n      };\n\n      await this.apiClient.trackActivity(activityData);\n      this.lastHeartbeat = Date.now();\n\n      // Save session data after successful update\n      this.saveSessionData();\n    } catch (error) {\n      console.warn(\"ActivityDetector: Failed to send activity update:\", error);\n    }\n  }\n\n  /**\n   * Send final activity data before stopping\n   */\n  async sendFinalActivity() {\n    this.updateActivity(); // Update one last time\n    await this.sendActivityUpdate();\n  }\n\n  /**\n   * Set user email for tracking\n   * @param {string} email - User email\n   */\n  setUserEmail(email) {\n    if (this.securityUtils.isValidEmail(email)) {\n      this.sessionData.userEmail = email;\n    }\n  }\n\n  /**\n   * Get current activity statistics\n   * @returns {Object} Activity statistics\n   */\n  getActivityStats() {\n    this.updateActivity(); // Update current session\n\n    return {\n      sessionDuration: Date.now() - this.sessionData.startTime,\n      activeTime: this.sessionData.totalActiveTime,\n      scrollDepth: this.sessionData.scrollDepth,\n      clickCount: this.sessionData.clickCount,\n      pageViews: this.sessionData.pageViews,\n      isActive: this.isActive,\n      isVisible: this.sessionData.isVisible,\n      lastActivity: this.sessionData.lastActivity,\n      lastHeartbeat: this.lastHeartbeat,\n    };\n  }\n\n  /**\n   * Get detector status\n   * @returns {Object} Status information\n   */\n  getStatus() {\n    return {\n      isActive: this.isActive,\n      hasUserEmail: !!this.sessionData.userEmail,\n      isVisible: this.sessionData.isVisible,\n      heartbeatActive: !!this.intervals.heartbeat,\n      lastHeartbeat: this.lastHeartbeat,\n      config: this.config,\n      activityStats: this.getActivityStats(),\n    };\n  }\n\n  /**\n   * Update detector configuration\n   * @param {Object} newConfig - New configuration\n   */\n  updateConfig(newConfig) {\n    this.config = { ...this.config, ...newConfig };\n\n    if (this.isActive) {\n      // Restart heartbeat with new interval if changed\n      if (newConfig.heartbeatInterval && this.intervals.heartbeat) {\n        this.stopHeartbeat();\n        this.startHeartbeat();\n      }\n    }\n  }\n\n  /**\n   * Debounce function to limit event frequency\n   * @param {Function} func - Function to debounce\n   * @param {number} delay - Delay in milliseconds\n   * @returns {Function} Debounced function\n   */\n  debounce(func, delay) {\n    let timeoutId;\n    return function (...args) {\n      clearTimeout(timeoutId);\n      timeoutId = setTimeout(() => func.apply(this, args), delay);\n    };\n  }\n\n  /**\n   * Reset activity tracking session\n   */\n  resetSession() {\n    this.sessionData = {\n      startTime: Date.now(),\n      lastActivity: Date.now(),\n      totalActiveTime: 0,\n      pageViews: 1,\n      scrollDepth: 0,\n      clickCount: 0,\n      userEmail: this.sessionData.userEmail, // Keep email\n      isVisible: !document.hidden,\n    };\n\n    this.saveSessionData();\n  }\n\n  /**\n   * Pause activity tracking\n   */\n  pause() {\n    if (!this.isActive) return;\n\n    this.stopHeartbeat();\n    this.sendActivityUpdate();\n    console.log(\"ActivityDetector: Paused\");\n  }\n\n  /**\n   * Resume activity tracking\n   */\n  resume() {\n    if (!this.isActive) return;\n\n    this.updateActivity();\n    this.startHeartbeat();\n    console.log(\"ActivityDetector: Resumed\");\n  }\n}\n\nexport default ActivityDetector;\n","/**\n * PaveKit SDK - Automated User Onboarding Detection\n *\n * Main entry point for the PaveKit JavaScript SDK.\n * Provides secure, privacy-compliant user signup detection and activity tracking.\n *\n * @version 1.0.0\n * @author PaveKit Team\n * @license MIT\n */\n\nimport SecurityUtils from \"./core/security.js\";\nimport APIClient from \"./core/api.js\";\nimport PrivacyManager from \"./core/privacy.js\";\nimport FormDetector from \"./detectors/form-detector.js\";\nimport OAuthDetector from \"./detectors/oauth-detector.js\";\nimport ActivityDetector from \"./detectors/activity-detector.js\";\n\n/**\n * Main PaveKit SDK class\n */\nclass PaveKitSDK {\n  constructor() {\n    this.version = \"1.0.0\";\n    this.initialized = false;\n    this.offlineMode = false;\n    this.config = {\n      apiKey: null,\n      baseURL: \"http://localhost:8000\",\n      domain: null,\n      detect: [\"signups\", \"activity\"],\n      privacy: \"gdpr-compliant\",\n      debug: false,\n      autoCleanup: true,\n      consentBanner: true,\n    };\n\n    // Initialize core components\n    this.securityUtils = new SecurityUtils();\n    this.apiClient = new APIClient();\n    this.privacyManager = new PrivacyManager();\n\n    // Initialize detectors (will be activated after init)\n    this.detectors = {\n      form: null,\n      oauth: null,\n      activity: null,\n    };\n\n    this.isDetecting = false;\n    this.userEmail = null;\n  }\n\n  /**\n   * Auto-initialization from script tag attributes\n   * This method is called automatically when the SDK is loaded\n   */\n  static autoInit() {\n    if (typeof window === \"undefined\") {\n      console.warn(\"PaveKit SDK: Not running in browser environment\");\n      return null;\n    }\n\n    // Find the SDK script tag\n    const script = document.querySelector('script[src*=\"pavekit\"]');\n    if (!script) {\n      console.warn(\n        \"PaveKit SDK: Script tag not found, manual initialization required\",\n      );\n      return null;\n    }\n\n    // Extract configuration from script tag data attributes\n    const config = {\n      apiKey: script.dataset.key,\n      domain: script.dataset.domain,\n      detect: script.dataset.detect\n        ? script.dataset.detect.split(\",\")\n        : [\"signups\", \"activity\"],\n      privacy: script.dataset.privacy || \"gdpr-compliant\",\n      debug: script.dataset.debug === \"true\",\n      baseURL: script.dataset.baseUrl || \"http://localhost:8000\",\n      consentBanner: script.dataset.consentBanner !== \"false\",\n    };\n\n    if (!config.apiKey) {\n      console.error(\n        'PaveKit SDK: API key is required. Add data-key=\"your-api-key\" to script tag',\n      );\n      return null;\n    }\n\n    // Create and initialize SDK instance\n    const sdk = new PaveKitSDK();\n    sdk.init(config);\n\n    // Make SDK globally available\n    window.PaveKit = sdk;\n\n    return sdk;\n  }\n\n  /**\n   * Initialize the SDK with configuration\n   * @param {Object} config - Configuration object\n   */\n  async init(config = {}) {\n    if (this.initialized) {\n      console.warn(\"PaveKit SDK: Already initialized\");\n      return;\n    }\n\n    // Merge configuration\n    this.config = { ...this.config, ...config };\n\n    if (this.config.debug) {\n      console.log(\"PaveKit SDK: Initializing with config:\", {\n        ...this.config,\n        apiKey: this.config.apiKey ? \"[SET]\" : \"[MISSING]\",\n      });\n    }\n\n    // Validate required configuration\n    if (!this.config.apiKey) {\n      throw new Error(\"PaveKit SDK: API key is required\");\n    }\n\n    // Check browser compatibility\n    if (!this.securityUtils.isBrowserSupported()) {\n      console.warn(\"PaveKit SDK: Browser not supported\");\n      return;\n    }\n\n    try {\n      // Initialize API client\n      this.apiClient.init({\n        apiKey: this.config.apiKey,\n        baseURL: this.config.baseURL,\n        debug: this.config.debug,\n      });\n\n      // Try to validate API key with backend (non-blocking)\n      let backendConnected = false;\n      try {\n        await this.validateConfiguration();\n        backendConnected = true;\n        if (this.config.debug) {\n          console.log(\"PaveKit SDK: Backend connection established \");\n        }\n      } catch (error) {\n        // Backend validation failed - continue in offline mode\n        console.warn(\n          \"PaveKit SDK: Backend validation failed, running in offline mode\",\n          error.message,\n        );\n        if (this.config.debug) {\n          console.log(\n            \"PaveKit SDK: Client-side features will work, but events won't be sent to backend\",\n          );\n        }\n      }\n\n      // Initialize detectors (they work even without backend)\n      this.initializeDetectors();\n\n      // Handle privacy and consent\n      await this.handlePrivacyConsent();\n\n      this.initialized = true;\n      this.offlineMode = !backendConnected;\n\n      if (this.config.debug) {\n        console.log(\"PaveKit SDK: Successfully initialized\", {\n          mode: backendConnected ? \"Online\" : \"Offline\",\n          backendConnected: backendConnected,\n        });\n      }\n\n      // Dispatch initialization event\n      this.dispatchEvent(\"initialized\", {\n        version: this.version,\n        config: this.config,\n        offlineMode: this.offlineMode,\n      });\n    } catch (error) {\n      console.error(\"PaveKit SDK: Initialization failed:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Validate configuration with backend\n   */\n  async validateConfiguration() {\n    const validation = await this.apiClient.validateAPIKey();\n\n    if (this.config.debug) {\n      console.log(\"PaveKit SDK: API key validated successfully\");\n    }\n\n    return validation;\n  }\n\n  /**\n   * Initialize detector components\n   */\n  initializeDetectors() {\n    this.detectors.form = new FormDetector(\n      this.securityUtils,\n      this.apiClient,\n      this.privacyManager,\n    );\n\n    this.detectors.oauth = new OAuthDetector(\n      this.securityUtils,\n      this.apiClient,\n      this.privacyManager,\n    );\n\n    this.detectors.activity = new ActivityDetector(\n      this.securityUtils,\n      this.apiClient,\n      this.privacyManager,\n    );\n\n    if (this.config.debug) {\n      console.log(\"PaveKit SDK: Detectors initialized\");\n    }\n  }\n\n  /**\n   * Handle privacy consent and GDPR compliance\n   */\n  async handlePrivacyConsent() {\n    const consentRequired = this.privacyManager.isConsentRequired();\n\n    if (consentRequired && this.config.consentBanner) {\n      const hasConsent = await this.privacyManager.requestConsent({\n        showBanner: true,\n        timeout: 30000, // 30 seconds timeout\n        message:\n          \"We use cookies and collect minimal data to improve your experience and send relevant onboarding emails.\",\n        privacyUrl: \"/privacy\",\n      });\n\n      if (!hasConsent) {\n        console.log(\"PaveKit SDK: User declined consent, tracking disabled\");\n        return;\n      }\n    } else if (!this.privacyManager.hasConsent()) {\n      // Grant implicit consent if not required to show banner\n      this.privacyManager.grantConsent(\"implicit\");\n    }\n\n    // Start detection if consent is granted\n    if (this.privacyManager.hasConsent()) {\n      this.startDetection();\n    }\n  }\n\n  /**\n   * Start user detection based on configuration\n   */\n  startDetection() {\n    if (this.isDetecting || !this.privacyManager.hasConsent()) {\n      return;\n    }\n\n    this.isDetecting = true;\n\n    const detectConfig = {\n      debug: this.config.debug,\n    };\n\n    // Start form detection\n    if (this.config.detect.includes(\"signups\") && this.detectors.form) {\n      this.detectors.form.start(detectConfig);\n    }\n\n    // Start OAuth detection\n    if (this.config.detect.includes(\"oauth\") && this.detectors.oauth) {\n      this.detectors.oauth.start(detectConfig);\n    }\n\n    // Start activity detection\n    if (this.config.detect.includes(\"activity\") && this.detectors.activity) {\n      this.detectors.activity.start(detectConfig, this.userEmail);\n    }\n\n    if (this.config.debug) {\n      console.log(\"PaveKit SDK: Detection started for:\", this.config.detect);\n    }\n\n    // Dispatch detection started event\n    this.dispatchEvent(\"detectionStarted\", {\n      detectors: this.config.detect,\n    });\n  }\n\n  /**\n   * Stop all detection\n   */\n  stopDetection() {\n    if (!this.isDetecting) return;\n\n    this.isDetecting = false;\n\n    // Stop all detectors\n    Object.values(this.detectors).forEach((detector) => {\n      if (detector && detector.stop) {\n        detector.stop();\n      }\n    });\n\n    if (this.config.debug) {\n      console.log(\"PaveKit SDK: Detection stopped\");\n    }\n\n    // Dispatch detection stopped event\n    this.dispatchEvent(\"detectionStopped\");\n  }\n\n  /**\n   * Manually track a signup event\n   * @param {Object} data - Signup data\n   */\n  async trackSignup(data = {}) {\n    if (!this.initialized || !this.privacyManager.hasConsent()) {\n      throw new Error(\"SDK not initialized or consent not granted\");\n    }\n\n    const signupData = {\n      email: data.email || this.userEmail,\n      signup_method: data.method || \"manual\",\n      page_url: data.pageUrl || window.location.href,\n      referrer: data.referrer || document.referrer,\n      metadata: data.metadata || {},\n    };\n\n    if (!signupData.email) {\n      throw new Error(\"Email is required for signup tracking\");\n    }\n\n    try {\n      const result = await this.apiClient.registerSignup(signupData);\n\n      if (this.config.debug) {\n        console.log(\"PaveKit SDK: Manual signup tracked:\", signupData.email);\n      }\n\n      // Update user email for activity tracking\n      this.setUserEmail(signupData.email);\n\n      return result;\n    } catch (error) {\n      console.error(\"PaveKit SDK: Failed to track signup:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Update user information (name, etc.)\n   * @param {Object} data - User data to update\n   * @param {string} data.email - User email (required to identify user)\n   * @param {string} data.name - User's display name\n   */\n  async updateUser(data = {}) {\n    if (!this.initialized || !this.privacyManager.hasConsent()) {\n      throw new Error(\"SDK not initialized or consent not granted\");\n    }\n\n    const userData = {\n      email: data.email || this.userEmail,\n      name: data.name || \"\",\n    };\n\n    if (!userData.email) {\n      throw new Error(\"Email is required to update user info\");\n    }\n\n    try {\n      const result = await this.apiClient.updateUser(userData);\n\n      if (this.config.debug) {\n        console.log(\"PaveKit SDK: User info updated:\", userData.email);\n      }\n\n      return result;\n    } catch (error) {\n      console.error(\"PaveKit SDK: Failed to update user:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Manually track a conversion event\n   * @param {Object} data - Conversion data\n   */\n  async trackConversion(data = {}) {\n    if (!this.initialized || !this.privacyManager.hasConsent()) {\n      throw new Error(\"SDK not initialized or consent not granted\");\n    }\n\n    const conversionData = {\n      email: data.email || this.userEmail,\n      conversion_type: data.type || \"purchase\",\n      value: data.value || 0,\n      currency: data.currency || \"USD\",\n      metadata: data.metadata || {},\n    };\n\n    if (!conversionData.email) {\n      throw new Error(\"Email is required for conversion tracking\");\n    }\n\n    try {\n      const result = await this.apiClient.trackConversion(conversionData);\n\n      if (this.config.debug) {\n        console.log(\"PaveKit SDK: Conversion tracked:\", {\n          email: conversionData.email,\n          type: conversionData.conversion_type,\n          value: conversionData.value,\n        });\n      }\n\n      return result;\n    } catch (error) {\n      console.error(\"PaveKit SDK: Failed to track conversion:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Set user email for tracking\n   * @param {string} email - User email address\n   */\n  setUserEmail(email) {\n    if (!this.securityUtils.isValidEmail(email)) {\n      throw new Error(\"Invalid email address\");\n    }\n\n    this.userEmail = email;\n\n    // Update activity detector with user email\n    if (this.detectors.activity) {\n      this.detectors.activity.setUserEmail(email);\n    }\n\n    if (this.config.debug) {\n      console.log(\"PaveKit SDK: User email set for tracking\");\n    }\n  }\n\n  /**\n   * Get user consent status\n   */\n  getConsentStatus() {\n    return this.privacyManager.getConsentStatus();\n  }\n\n  /**\n   * Request user consent manually\n   */\n  async requestConsent() {\n    return await this.privacyManager.requestConsent({\n      showBanner: true,\n    });\n  }\n\n  /**\n   * Opt user out of all tracking\n   */\n  optOut() {\n    this.stopDetection();\n    this.privacyManager.optOut();\n\n    if (this.config.debug) {\n      console.log(\"PaveKit SDK: User opted out\");\n    }\n  }\n\n  /**\n   * Opt user back into tracking\n   */\n  async optIn() {\n    const hasConsent = await this.privacyManager.optIn();\n\n    if (hasConsent) {\n      this.startDetection();\n\n      if (this.config.debug) {\n        console.log(\"PaveKit SDK: User opted back in\");\n      }\n    }\n\n    return hasConsent;\n  }\n\n  /**\n   * Delete all user data (GDPR right to erasure)\n   */\n  deleteUserData() {\n    this.stopDetection();\n    this.privacyManager.clearStoredData();\n    this.userEmail = null;\n\n    if (this.config.debug) {\n      console.log(\"PaveKit SDK: User data deleted\");\n    }\n  }\n\n  /**\n   * Get current SDK status\n   */\n  getStatus() {\n    const status = {\n      version: this.version,\n      initialized: this.initialized,\n      detecting: this.isDetecting,\n      hasConsent: this.privacyManager.hasConsent(),\n      hasUserEmail: !!this.userEmail,\n      detectors: {},\n    };\n\n    // Get detector statuses\n    Object.keys(this.detectors).forEach((key) => {\n      const detector = this.detectors[key];\n      if (detector && detector.getStatus) {\n        status.detectors[key] = detector.getStatus();\n      }\n    });\n\n    return status;\n  }\n\n  /**\n   * Update SDK configuration\n   * @param {Object} newConfig - New configuration\n   */\n  updateConfig(newConfig = {}) {\n    this.config = { ...this.config, ...newConfig };\n\n    // Update API client if needed\n    if (newConfig.baseURL || newConfig.apiKey) {\n      this.apiClient.updateConfig({\n        baseURL: newConfig.baseURL,\n        apiKey: newConfig.apiKey,\n      });\n    }\n\n    // Update detectors if needed\n    Object.values(this.detectors).forEach((detector) => {\n      if (detector && detector.updateConfig) {\n        detector.updateConfig(newConfig);\n      }\n    });\n\n    if (this.config.debug) {\n      console.log(\"PaveKit SDK: Configuration updated\");\n    }\n  }\n\n  /**\n   * Dispatch custom events\n   * @param {string} eventName - Event name\n   * @param {Object} data - Event data\n   */\n  dispatchEvent(eventName, data = {}) {\n    try {\n      const event = new CustomEvent(`pavekit-${eventName}`, {\n        detail: {\n          timestamp: new Date().toISOString(),\n          version: this.version,\n          ...data,\n        },\n      });\n\n      window.dispatchEvent(event);\n    } catch (error) {\n      console.warn(\"PaveKit SDK: Failed to dispatch event:\", error);\n    }\n  }\n\n  /**\n   * Get debug information\n   */\n  getDebugInfo() {\n    return {\n      version: this.version,\n      config: this.config,\n      status: this.getStatus(),\n      browserSupport: this.securityUtils.isBrowserSupported(),\n      privacy: this.privacyManager.getConsentStatus(),\n      apiClient: this.apiClient.getStatus(),\n      compliance: this.securityUtils.getComplianceInfo(),\n    };\n  }\n\n  /**\n   * Reset SDK to initial state\n   */\n  reset() {\n    this.stopDetection();\n    this.privacyManager.reset();\n    this.apiClient.reset();\n    this.userEmail = null;\n    this.initialized = false;\n\n    if (this.config.debug) {\n      console.log(\"PaveKit SDK: Reset to initial state\");\n    }\n  }\n}\n\n// Auto-initialize if loaded as script tag\nif (typeof window !== \"undefined\" && document.readyState === \"loading\") {\n  document.addEventListener(\"DOMContentLoaded\", () => {\n    PaveKitSDK.autoInit();\n  });\n} else if (typeof window !== \"undefined\") {\n  // DOM already loaded\n  setTimeout(() => {\n    PaveKitSDK.autoInit();\n  }, 0);\n}\n\n// Export for module usage\nexport default PaveKitSDK;\n\n// Also make available globally for script tag usage\nif (typeof window !== \"undefined\") {\n  window.PaveKitSDK = PaveKitSDK;\n}\n"],"names":["root","factory","exports","module","define","amd","Object","self","this","__webpack_require__","definition","key","o","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","constructor","SENSITIVE_PATTERNS","SAFE_PATTERNS","SAFE_INPUT_TYPES","BLOCKED_INPUT_TYPES","isSafeToCapture","fieldName","fieldType","element","name","toLowerCase","type","includes","containsSensitivePattern","placeholder","ariaLabel","getAttribute","styles","window","getComputedStyle","display","visibility","autocomplete","containsSafePattern","text","lowerText","some","pattern","sanitizeFormData","formData","form","sanitized","keys","forEach","value","trim","querySelector","isEmailField","isValidEmail","sanitizeEmail","sanitizeText","email","test","substring","hashSensitiveData","data","hash","length","toString","i","charCodeAt","Math","abs","isSafeURL","url","location","href","lowerUrl","page","extractSafePageData","title","document","referrer","timestamp","Date","toISOString","userAgent","navigator","isBrowserSupported","fetch","Promise","addEventListener","getComplianceInfo","gdpr_compliant","data_minimization","no_sensitive_data","user_consent_required","opt_out_available","data_retention_limited","baseURL","apiKey","timeout","retryAttempts","retryDelay","init","config","debug","makeRequest","endpoint","options","requestOptions","method","headers","controller","AbortController","timeoutId","setTimeout","abort","signal","lastError","attempt","response","clearTimeout","ok","json","errorData","Error","status","error","message","delay","registerSignup","payload","signup_method","page_url","user_agent","metadata","body","JSON","stringify","trackActivity","updateUser","trackConversion","conversion_type","currency","validateAPIKey","sendBatch","events","batch_timestamp","getConfig","testConnection","ms","resolve","getStatus","initialized","hasConnection","updateConfig","reset","consentKey","optOutKey","hasUserConsent","isOptedOut","consentTimestamp","consentVersion","loadConsentStatus","consentData","localStorage","getItem","optOutData","consent","parse","granted","version","saveConsentStatus","setItem","hasConsent","isDoNotTrackEnabled","doNotTrack","msDoNotTrack","requestConsent","showBanner","showConsentBanner","grantConsent","getElementById","banner","createConsentBanner","appendChild","handleResponse","removeChild","denyConsent","onclick","contains","createElement","id","style","cssText","privacyUrl","innerHTML","dispatchConsentEvent","optOut","clearStoredData","optIn","removeItem","startsWith","sessionStorage","event","CustomEvent","detail","dispatchEvent","getConsentStatus","isConsentRequired","getAnonymousId","anonymousId","now","random","substr","getDataRetentionInfo","analyticsData","emailData","rightToErasure","dataController","securityUtils","apiClient","privacyManager","isActive","detectedForms","Set","processedSubmissions","debounceDelay","maxFormsToMonitor","requireEmailField","autoDetect","start","scanForForms","attachDOMObserver","attachGlobalFormListener","stop","detachGlobalFormListener","detachDOMObserver","clear","querySelectorAll","size","isSignupForm","monitorForm","domObserver","MutationObserver","mutations","mutation","addedNodes","node","nodeType","Node","ELEMENT_NODE","tagName","observe","childList","subtree","disconnect","formSubmitHandler","handleFormSubmit","bind","removeEventListener","target","submissionId","getSubmissionId","has","add","delete","processSignupForm","FormData","extractEmailFromForm","action","hasEmailField","formText","className","indicator","hasSignupIndicators","hasPasswordField","fieldCount","hasSignupButtons","buttons","Array","from","button","buttonText","textContent","outline","safeData","extractSafeData","signupData","form_data","form_action","form_method","detected_at","emailInput","emailLikeSelectors","selector","input","inputType","newConfig","getDetectedForms","map","checkInterval","maxChecks","cleanupDelay","supportedProviders","checkCount","intervalId","detectedFlows","checkForOAuthReturn","setInterval","stopPeriodicChecking","attachURLChangeListener","detachURLChangeListener","clearInterval","originalPushState","history","pushState","originalReplaceState","replaceState","apply","arguments","currentURL","urlParams","URLSearchParams","search","hashParams","flowId","generateFlowId","oauthData","detectOAuthFlow","isOAuthReturn","processOAuthReturn","cleanOAuthParams","replace","result","provider","flowType","hasError","errorDescription","state","accessToken","idToken","detectOAuthProvider","validateOAuthReturn","providers","google","github","microsoft","facebook","twitter","linkedin","apple","domains","entries","domain","stateLower","hasOAuthReferrer","hasOAuthPattern","navigationTiming","performance","getEntriesByType","isRecentNavigation","loadEventStart","extractEmailFromPage","oauth_provider","oauth_flow_type","oauth_state","emailSelectors","elements","extractEmailFromElement","emailMatches","match","dataset","URL","params","searchParams","paramsChanged","param","newURL","intervalActive","getDetectedFlows","detectedAt","manualDetection","heartbeatInterval","minActivityDuration","trackScroll","trackClicks","trackTimeOnPage","trackPageVisibility","maxInactivityTime","sessionData","startTime","lastActivity","totalActiveTime","pageViews","scrollDepth","clickCount","userEmail","isVisible","intervals","eventHandlers","lastHeartbeat","inactivityTimer","initializeSession","attachEventListeners","startHeartbeat","startInactivityTimer","detachEventListeners","stopHeartbeat","stopInactivityTimer","sendFinalActivity","hidden","loadSessionData","stored","max","saveSessionData","savedAt","visibilityChange","handleVisibilityChange","scroll","debounce","handleScroll","passive","click","handleClick","mouseMove","updateActivity","keyPress","beforeUnload","handleBeforeUnload","focus","blur","handleBlur","sendActivityUpdate","scrollTop","pageYOffset","documentElement","documentHeight","scrollHeight","windowHeight","innerHeight","scrollPercentage","round","isSafeClickTarget","elementText","timeDiff","restartInactivityTimer","heartbeat","handleInactivity","activityData","activity_data","time_on_page","scroll_depth","click_count","page_views","is_visible","session_duration","setUserEmail","getActivityStats","sessionDuration","activeTime","hasUserEmail","heartbeatActive","activityStats","func","args","resetSession","pause","resume","PaveKitSDK","offlineMode","detect","privacy","autoCleanup","consentBanner","SecurityUtils","APIClient","PrivacyManager","detectors","oauth","activity","isDetecting","autoInit","script","split","baseUrl","sdk","PaveKit","backendConnected","validateConfiguration","initializeDetectors","handlePrivacyConsent","validation","FormDetector","OAuthDetector","ActivityDetector","startDetection","detectConfig","stopDetection","values","detector","trackSignup","pageUrl","userData","conversionData","deleteUserData","detecting","eventName","getDebugInfo","browserSupport","compliance","readyState"],"ignoreList":[],"sourceRoot":""}